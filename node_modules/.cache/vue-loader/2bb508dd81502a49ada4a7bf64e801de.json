{"remainingRequest":"C:\\Users\\Max\\Desktop\\New folder (3)\\projet_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Max\\Desktop\\New folder (3)\\projet_vue\\src\\components\\Restaurants.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Max\\Desktop\\New folder (3)\\projet_vue\\src\\components\\Restaurants.vue","mtime":1579008674093},{"path":"C:\\Users\\Max\\Desktop\\New folder (3)\\projet_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Max\\Desktop\\New folder (3)\\projet_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Max\\Desktop\\New folder (3)\\projet_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Max\\Desktop\\New folder (3)\\projet_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJSZXN0YXVyYW50cyIsDQogIHByb3BzOiB7fSwNCg0KICBkYXRhOiBmdW5jdGlvbigpIHsNCiAgICByZXR1cm4gew0KICAgICAgcmVzdG86IFtdLA0KICAgICAgdXBkYXRlOiBmYWxzZSwNCiAgICAgIGRlbDogZmFsc2UsDQogICAgICByZXN0YXVyYW50czogW10sDQogICAgICBuYlJlc3RhdXJhbnRzOiAwLA0KICAgICAgbm9tOiAiIiwNCiAgICAgIGN1aXNpbmU6ICIiLA0KICAgICAgcGFnZTogMSwNCiAgICAgIHBhZ2VzaXplOiAxMCwNCiAgICAgIG5vbVJlY2hlcmNoZTogIiIsDQogICAgICBuYlBhZ2VzRGVSZXN1bHRhdHM6IDAsDQogICAgICBhcGlVUkw6ICJodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3Jlc3RhdXJhbnRzIg0KICAgIH07DQogIH0sDQoNCiAgbW91bnRlZCgpIHsNCiAgICBjb25zb2xlLmxvZygiQmVmb3JlIHByaW50ISIpOw0KICAgIHRoaXMuZ2V0RGF0YUZyb21TZXJ2ZXIoKTsNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgZ2V0RGF0YUZyb21TZXJ2ZXIoKSB7DQogICAgICAvLyBpY2kgb24gZmFpdCB1biBmZXRjaCBwb3VyIHLDqWN1cMOpcmVyIGRlcw0KICAgICAgLy8gcmVzdGF1cmFudHMgc3VyIGxlIHNlcnZldXIuDQogICAgICBsZXQgdXJsID0NCiAgICAgICAgdGhpcy5hcGlVUkwgKw0KICAgICAgICAiP3BhZ2U9IiArDQogICAgICAgIHRoaXMucGFnZSArDQogICAgICAgICImcGFnZXNpemU9IiArDQogICAgICAgIHRoaXMucGFnZXNpemUgKw0KICAgICAgICAiJm5hbWU9IiArDQogICAgICAgIHRoaXMubm9tUmVjaGVyY2hlOw0KDQogICAgICBmZXRjaCh1cmwpDQogICAgICAgIC50aGVuKHJlcG9uc2VKU09OID0+IHsNCiAgICAgICAgICByZXR1cm4gcmVwb25zZUpTT04uanNvbigpOw0KICAgICAgICB9KQ0KICAgICAgICAudGhlbihyZXBvbnNlSlMgPT4gew0KICAgICAgICAgIC8vIGljaSBvbiBhIGxhIHLDqXBvbnNlIHNvdXMgbGEgZm9ybWUNCiAgICAgICAgICAvLyBkJ3VuIG9iamV0IEpTDQogICAgICAgICAgdGhpcy5yZXN0YXVyYW50cyA9IHJlcG9uc2VKUy5kYXRhOw0KICAgICAgICAgIHRoaXMubmJSZXN0YXVyYW50cyA9IHJlcG9uc2VKUy5jb3VudDsNCiAgICAgICAgICB0aGlzLm5iUGFnZXNEZVJlc3VsdGF0cyA9IE1hdGguZmxvb3IoDQogICAgICAgICAgICB0aGlzLm5iUmVzdGF1cmFudHMgLyB0aGlzLnBhZ2VzaXplDQogICAgICAgICAgKTsNCiAgICAgICAgfSk7DQogICAgfSwNCg0KICAgIGFzeW5jIGRlbGV0ZVJlc3RhdXJhbnQoaWQpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIGxldCByZXBvbnNlSlNPTiA9IGF3YWl0IGZldGNoKHRoaXMuYXBpVVJMICsgIi8iICsgaWQsIHsNCiAgICAgICAgICBtZXRob2Q6ICJERUxFVEUiDQogICAgICAgIH0pOw0KICAgICAgICBsZXQgcmVwb25zZUpTID0gYXdhaXQgcmVwb25zZUpTT04uanNvbigpOw0KICAgICAgICBjb25zb2xlLmxvZygiUmVzdGF1cmFudCBzdXBwcmltZSA6ICIgKyByZXBvbnNlSlMubXNnKTsNCiAgICAgICAgdGhpcy5nZXREYXRhRnJvbVNlcnZlcigpOyAvLyBvbiByYWZyYWljaGl0IGwnYWZmaWNoYWdlDQogICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgY29uc29sZS5sb2coIkVycmV1ciBkYW5zIGxlIGZldGNocyBERUxFVEUgIiArIGVyci5tc2cpOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBhc3luYyB1cGRhdGVSZXN0YXVyYW50KHJlc3RvKSB7DQogICAgICBsZXQgZGF0YUZvcm0gPSBuZXcgRm9ybURhdGEoKTsNCiAgICAgIGRhdGFGb3JtLmFwcGVuZCgiaWQiLCByZXN0by5pZCk7DQogICAgICBkYXRhRm9ybS5hcHBlbmQoIm5vbSIsIHJlc3RvLm5hbWUpOw0KICAgICAgZGF0YUZvcm0uYXBwZW5kKCJjdWlzaW5lIiwgcmVzdG8uY3Vpc2luZSk7DQogICAgICBsZXQgcmVzcG9uc2VKU09OID0gYXdhaXQgZmV0Y2godGhpcy5hcGlVUkwgKyAiLyIgKyByZXN0by5faWQsIHsNCiAgICAgICAgbWV0aG9kOiAiUFVUIiwNCiAgICAgICAgYm9keTogZGF0YUZvcm0NCiAgICAgIH0pOw0KICAgICAgbGV0IHJlc3BvbnNlSlMgPSBhd2FpdCByZXNwb25zZUpTT04uanNvbigpOw0KICAgICAgY29uc29sZS5sb2cocmVzcG9uc2VKUy5tc2cpOw0KICAgICAgdGhpcy5nZXREYXRhRnJvbVNlcnZlcigpOw0KICAgIH0sDQogICAgLyogIGRlbGV0ZVJlc3RhdXJhbnQoaW5kZXgpIHsNCiAgICAgIHRoaXMucmVzdGF1cmFudHMuc3BsaWNlKGluZGV4LCAxKTsNCiAgICB9LCAqLw0KICAgIGFzeW5jIGFkZFJlc3RhdXJhbnQoZXZlbnQpIHsNCiAgICAgIC8vIGV2aXRlciBsZSBjb21wb3J0ZW1lbnQgcGFyIGRlZmF1dA0KICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgIGxldCBkYXRhRm9ybSA9IG5ldyBGb3JtRGF0YSgpOw0KICAgICAgZGF0YUZvcm0uYXBwZW5kKCJub20iLCB0aGlzLm5vbSk7DQogICAgICBkYXRhRm9ybS5hcHBlbmQoImN1aXNpbmUiLCB0aGlzLmN1aXNpbmUpOw0KDQogICAgICBsZXQgcmVwb25zZUpTT04gPSBhd2FpdCBmZXRjaCh0aGlzLmFwaVVSTCwgew0KICAgICAgICBtZXRob2Q6ICJQT1NUIiwNCiAgICAgICAgYm9keTogZGF0YUZvcm0NCiAgICAgIH0pOw0KICAgICAgbGV0IHJlcG9uc2VKUyA9IGF3YWl0IHJlcG9uc2VKU09OLmpzb24oKTsNCiAgICAgIGNvbnNvbGUubG9nKHJlcG9uc2VKUy5tc2cpOw0KDQogICAgICB0aGlzLm5vbSA9ICIiOw0KICAgICAgdGhpcy5jdWlzaW5lID0gIiI7DQoNCiAgICAgIHRoaXMuZ2V0RGF0YUZyb21TZXJ2ZXIoKTsgLy8gb24gcmFmcmFpY2hpdA0KICAgIH0sDQogICAgZ2V0Q29sb3IoaW5kZXgpIHsNCiAgICAgIHJldHVybiBpbmRleCAlIDIgPyAibGlnaHRCbHVlIiA6ICJwaW5rIjsNCiAgICB9LA0KICAgIG5leHRQYWdlKCkgew0KICAgICAgY29uc29sZS5sb2coIk5leHQgcGFnZSIpOw0KICAgICAgdGhpcy5wYWdlKys7DQogICAgICB0aGlzLmdldERhdGFGcm9tU2VydmVyKCk7DQogICAgfSwNCiAgICBwcmV2aW91c1BhZ2UoKSB7DQogICAgICBjb25zb2xlLmxvZygiUHJldmlvdXMgcGFnZSIpOw0KICAgICAgdGhpcy5wYWdlLS07DQogICAgICB0aGlzLmdldERhdGFGcm9tU2VydmVyKCk7DQogICAgfSwNCiAgICBmaXJzdFBhZ2UoKSB7DQogICAgICB0aGlzLnBhZ2U9MTsNCiAgICAgIHRoaXMuZ2V0RGF0YUZyb21TZXJ2ZXIoKTsNCiAgICB9LA0KICAgIGxhc3RQYWdlKCkgew0KICAgICAgdGhpcy5wYWdlPXRoaXMubmJQYWdlc0RlUmVzdWx0YXRzOw0KICAgICAgdGhpcy5nZXREYXRhRnJvbVNlcnZlcigpOw0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["Restaurants.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+HA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Restaurants.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <p>\r\n      Number of restaurants for each page :\r\n     <!--  <vue-material-slider :min=\"0\" :max=\"20\" v-model=\"pagesize\"></vue-material-slider> -->\r\n      <input\r\n        type=\"range\"\r\n        min=\"2\"\r\n        max=\"100\"\r\n        value=\"10\"\r\n        v-on:input=\"getDataFromServer()\"\r\n        v-model=\"pagesize\"\r\n      />\r\n      {{pagesize}}\r\n    </p>\r\n    <h1>Number of restaurants : {{nbRestaurants}}</h1>\r\n    <h3>Current page : {{ page }}</h3>\r\n    <md-button class=\"md-raised\" v-on:click=\"firstPage()\" v-bind:disabled=\"page==1\">&lt;&lt;</md-button>\r\n    <md-button class=\"md-raised\" v-on:click=\"previousPage()\" v-bind:disabled=\"page==1\">Previous</md-button>\r\n    <md-button class=\"md-raised\" v-on:click=\"nextPage()\" :disabled=\"page == nbPagesDeResultats\">Next</md-button>\r\n    <md-button class=\"md-raised\" v-on:click=\"lastPage()\" :disabled=\"page == nbPagesDeResultats\">&gt;&gt;</md-button>\r\n\r\n    <div class=\"md-layout\">\r\n      <h2 class=\"md-title, md-layout-item\">Add a restaurant</h2>\r\n      <md-field class=\"md-layout-item\">\r\n        <md-input placeholder=\"Name\" v-model=\"nom\" />\r\n      </md-field>\r\n      <span class=\"divider\"></span>\r\n      <md-field class=\"md-layout-item\">\r\n        <md-input placeholder=\"Cuisine\" v-model=\"cuisine\" />\r\n      </md-field>\r\n      <md-button class=\"md-raised md-primary\" v-on:click=\"addRestaurant\">Add</md-button>\r\n    </div>\r\n\r\n    <md-table v-model=\"restaurants\" md-sort=\"name\" md-sort-order=\"asc\" md-card md-fixed-header>\r\n      <md-table-toolbar>\r\n        <div class=\"md-toolbar-section-start\">\r\n          <h1 class=\"md-title\">Name search</h1>\r\n        </div>\r\n\r\n        <md-field md-clearable class=\"md-toolbar-section-end\">\r\n          <md-input\r\n            placeholder=\"Search by name...\"\r\n            v-model=\"nomRecherche\"\r\n            @input=\"getDataFromServer()\"\r\n          />\r\n        </md-field>\r\n      </md-table-toolbar>\r\n\r\n      <md-table-empty-state\r\n        md-label=\"No users found\"\r\n        :md-description=\"`No user found for this '${nomRecherche}' query. Try a different search term or create a new user.`\"\r\n      ></md-table-empty-state>\r\n\r\n      <md-table-row slot=\"md-table-row\" slot-scope=\"{ item }\">\r\n        <md-table-cell md-label=\"Name\" md-sort-by=\"name\">{{ item.name }}</md-table-cell>\r\n        <md-table-cell md-label=\"Cuisine\" md-sort-by=\"cuisine\">{{ item.cuisine }}</md-table-cell>\r\n        <md-table-cell md-label=\"Details\">\r\n          <router-link :to=\"'restaurant/'+item._id\">Details</router-link>\r\n        </md-table-cell>\r\n        <md-dialog class=\"update\" :md-active.sync=\"update\">\r\n          <h2>Update restaurant id : {{ resto._id }}</h2>\r\n          <br />\r\n          <form>\r\n            <md-field>\r\n              <!-- <label> Name : </label> -->\r\n              <!--  <md-input type =\"text\" placeHolder = \"Restaurant name \" v-model=\"resto.name\"></md-input> -->\r\n              <md-input type=\"text\" placeholder=\"Name\" v-model=\"resto.name\"></md-input>\r\n            </md-field>\r\n            <br />\r\n            <br />\r\n            <md-field>\r\n              <!--   <label> Cuisine : </label> -->\r\n              <!--  <md-input type =\"text\" placeHolder = \"Restaurant cuisine \" v-model=\"resto.cuisine\"></md-input> -->\r\n              <md-input type=\"text\" placeholder=\"Cuisine\" v-model=\"resto.cuisine\"></md-input>\r\n            </md-field>\r\n          </form>\r\n          <md-dialog-actions>\r\n            <md-button\r\n              class=\"md-primary\"\r\n              @click=\"update = false\"\r\n              v-on:click=\"getDataFromServer()\"\r\n            >Close</md-button>\r\n            <!-- on rafraichit pour restorer valeurs initiales -->\r\n            <md-button\r\n              class=\"md-primary\"\r\n              @click=\"update = false\"\r\n              v-on:click=\"updateRestaurant(resto)\"\r\n            >Save</md-button>\r\n            <!-- on modifie le restaurant -->\r\n          </md-dialog-actions>\r\n        </md-dialog>\r\n        <md-table-cell md-label=\"Update\">\r\n          <md-button class=\"md-primary md-raised\" @click=\"update = true, resto= item\">Update</md-button>\r\n        </md-table-cell>\r\n\r\n        <md-dialog class=\"update\" :md-active.sync=\"del\">\r\n          <h2>Delete restaurant id : {{ resto._id }}</h2>\r\n          <br />\r\n          <p>Do you really want to delete this restaurant ?</p>\r\n          <md-dialog-actions>\r\n            <md-button\r\n              class=\"md-primary\"\r\n              @click=\"del = false\"\r\n              v-on:click=\"getDataFromServer()\"\r\n            >Cancel</md-button>\r\n            <!-- on rafraichit pour restorer valeurs initiales -->\r\n            <md-button\r\n              class=\"md-primary\"\r\n              @click=\"del = false\"\r\n              v-on:click=\"deleteRestaurant(resto._id)\"\r\n            >Confirm</md-button>\r\n            <!-- on modifie le restaurant -->\r\n          </md-dialog-actions>\r\n        </md-dialog>\r\n        <md-table-cell md-label=\"Delete\">\r\n          <md-button\r\n            class=\"md-accent md-raised\"\r\n            @click=\"del = true, resto= item\"\r\n          >Delete</md-button>\r\n        </md-table-cell>\r\n      </md-table-row>\r\n    </md-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Restaurants\",\r\n  props: {},\r\n\r\n  data: function() {\r\n    return {\r\n      resto: [],\r\n      update: false,\r\n      del: false,\r\n      restaurants: [],\r\n      nbRestaurants: 0,\r\n      nom: \"\",\r\n      cuisine: \"\",\r\n      page: 1,\r\n      pagesize: 10,\r\n      nomRecherche: \"\",\r\n      nbPagesDeResultats: 0,\r\n      apiURL: \"http://localhost:8080/api/restaurants\"\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    console.log(\"Before print!\");\r\n    this.getDataFromServer();\r\n  },\r\n\r\n  methods: {\r\n    getDataFromServer() {\r\n      // ici on fait un fetch pour récupérer des\r\n      // restaurants sur le serveur.\r\n      let url =\r\n        this.apiURL +\r\n        \"?page=\" +\r\n        this.page +\r\n        \"&pagesize=\" +\r\n        this.pagesize +\r\n        \"&name=\" +\r\n        this.nomRecherche;\r\n\r\n      fetch(url)\r\n        .then(reponseJSON => {\r\n          return reponseJSON.json();\r\n        })\r\n        .then(reponseJS => {\r\n          // ici on a la réponse sous la forme\r\n          // d'un objet JS\r\n          this.restaurants = reponseJS.data;\r\n          this.nbRestaurants = reponseJS.count;\r\n          this.nbPagesDeResultats = Math.floor(\r\n            this.nbRestaurants / this.pagesize\r\n          );\r\n        });\r\n    },\r\n\r\n    async deleteRestaurant(id) {\r\n      try {\r\n        let reponseJSON = await fetch(this.apiURL + \"/\" + id, {\r\n          method: \"DELETE\"\r\n        });\r\n        let reponseJS = await reponseJSON.json();\r\n        console.log(\"Restaurant supprime : \" + reponseJS.msg);\r\n        this.getDataFromServer(); // on rafraichit l'affichage\r\n      } catch (err) {\r\n        console.log(\"Erreur dans le fetchs DELETE \" + err.msg);\r\n      }\r\n    },\r\n\r\n    async updateRestaurant(resto) {\r\n      let dataForm = new FormData();\r\n      dataForm.append(\"id\", resto.id);\r\n      dataForm.append(\"nom\", resto.name);\r\n      dataForm.append(\"cuisine\", resto.cuisine);\r\n      let responseJSON = await fetch(this.apiURL + \"/\" + resto._id, {\r\n        method: \"PUT\",\r\n        body: dataForm\r\n      });\r\n      let responseJS = await responseJSON.json();\r\n      console.log(responseJS.msg);\r\n      this.getDataFromServer();\r\n    },\r\n    /*  deleteRestaurant(index) {\r\n      this.restaurants.splice(index, 1);\r\n    }, */\r\n    async addRestaurant(event) {\r\n      // eviter le comportement par defaut\r\n      event.preventDefault();\r\n      let dataForm = new FormData();\r\n      dataForm.append(\"nom\", this.nom);\r\n      dataForm.append(\"cuisine\", this.cuisine);\r\n\r\n      let reponseJSON = await fetch(this.apiURL, {\r\n        method: \"POST\",\r\n        body: dataForm\r\n      });\r\n      let reponseJS = await reponseJSON.json();\r\n      console.log(reponseJS.msg);\r\n\r\n      this.nom = \"\";\r\n      this.cuisine = \"\";\r\n\r\n      this.getDataFromServer(); // on rafraichit\r\n    },\r\n    getColor(index) {\r\n      return index % 2 ? \"lightBlue\" : \"pink\";\r\n    },\r\n    nextPage() {\r\n      console.log(\"Next page\");\r\n      this.page++;\r\n      this.getDataFromServer();\r\n    },\r\n    previousPage() {\r\n      console.log(\"Previous page\");\r\n      this.page--;\r\n      this.getDataFromServer();\r\n    },\r\n    firstPage() {\r\n      this.page=1;\r\n      this.getDataFromServer();\r\n    },\r\n    lastPage() {\r\n      this.page=this.nbPagesDeResultats;\r\n      this.getDataFromServer();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.divider {\r\n  margin: 5px;\r\n}\r\n.update {\r\n  padding: 20px;\r\n}\r\n</style>\r\n"]}]}